function gmCaptcha(t){t={spellLang:"it-IT",type:"graphic",...t};let e=this,n=document.getElementById("gmCaptcha");var c;let i,s,a=["rgb(128,64,192)","rgb(192,64,128)","rgb(108,192,64)"];this.drawCaptcha=function(t){n.setAttribute("style","text-align: center;"),n.textContent="";const c=document.createElement("style");c.setAttribute("type","text/css"),c.textContent=".clearfix::after {content: ''; display: block; clear: both;}",n.appendChild(c);const i=document.createElement("div");i.setAttribute("style","width: 165px; border: 0;"),i.className="clearfix";const s=document.createElement("div");s.setAttribute("style","float: left; text-align: center; padding: 4px;");const a=document.createElement("img");a.setAttribute("src","data:image/png;base64,"+t),s.appendChild(a),i.appendChild(s);const o=document.createElement("div");o.setAttribute("style","float: right;");const r=document.createElement("button");r.setAttribute("type","button"),r.setAttribute("style","margin-bottom: 2px;");let d=document.createElementNS("http://www.w3.org/2000/svg","svg");d.setAttribute("viewBox","0 0 576 512"),d.setAttribute("width","12"),d.setAttribute("height","12"),d.setAttribute("style","padding-left: 2px;");const l=document.createElementNS("http://www.w3.org/2000/svg","path");l.setAttribute("d","M215 71.1L126.1 160H24c-13.3 0-24 10.7-24 24v144c0 13.3 10.7 24 24 24h102.1l89 89c15 15 41 4.5 41-17V88c0-21.5-26-32-41-17zm233.3-51.1c-11.2-7.3-26.2-4.2-33.5 7-7.3 11.2-4.2 26.2 7 33.5 66.3 43.5 105.8 116.6 105.8 195.6 0 79-39.6 152.1-105.8 195.6-11.2 7.3-14.3 22.3-7 33.5 7 10.7 21.9 14.6 33.5 7C528.3 439.6 576 351.3 576 256S528.3 72.4 448.4 20zM480 256c0-63.5-32.1-121.9-85.8-156.2-11.2-7.1-26-3.8-33.1 7.5s-3.8 26.2 7.4 33.4C408.3 166 432 209.1 432 256s-23.7 90-63.5 115.4c-11.2 7.1-14.5 22.1-7.4 33.4 6.5 10.4 21.1 15.1 33.1 7.5C447.9 377.9 480 319.5 480 256zm-141.8-76.9c-11.6-6.3-26.2-2.2-32.6 9.5-6.4 11.6-2.2 26.2 9.5 32.6C328 228.3 336 241.6 336 256c0 14.4-8 27.7-20.9 34.8-11.6 6.4-15.8 21-9.5 32.6 6.4 11.7 21.1 15.8 32.6 9.5 28.2-15.6 45.8-45 45.8-76.9s-17.5-61.3-45.8-76.9z"),d.appendChild(l),r.appendChild(d),r.addEventListener("click",(function(){e.callSound()})),o.appendChild(r);const p=document.createElement("br");o.appendChild(p);const u=document.createElement("button");u.setAttribute("type","button");let h=document.createElementNS("http://www.w3.org/2000/svg","svg");h.setAttribute("viewBox","0 0 576 512"),h.setAttribute("width","12"),h.setAttribute("height","12"),h.setAttribute("style","padding-left: 2px;");const m=document.createElementNS("http://www.w3.org/2000/svg","path");m.setAttribute("d","M142.9 142.9c62.2-62.2 162.7-62.5 225.3-1L327 183c-6.9 6.9-8.9 17.2-5.2 26.2s12.5 14.8 22.2 14.8H463.5c0 0 0 0 0 0H472c13.3 0 24-10.7 24-24V72c0-9.7-5.8-18.5-14.8-22.2s-19.3-1.7-26.2 5.2L413.4 96.6c-87.6-86.5-228.7-86.2-315.8 1C73.2 122 55.6 150.7 44.8 181.4c-5.9 16.7 2.9 34.9 19.5 40.8s34.9-2.9 40.8-19.5c7.7-21.8 20.2-42.3 37.8-59.8zM16 312v7.6 .7V440c0 9.7 5.8 18.5 14.8 22.2s19.3 1.7 26.2-5.2l41.6-41.6c87.6 86.5 228.7 86.2 315.8-1c24.4-24.4 42.1-53.1 52.9-83.7c5.9-16.7-2.9-34.9-19.5-40.8s-34.9 2.9-40.8 19.5c-7.7 21.8-20.2 42.3-37.8 59.8c-62.2 62.2-162.7 62.5-225.3 1L185 329c6.9-6.9 8.9-17.2 5.2-26.2s-12.5-14.8-22.2-14.8H48.4h-.7H40c-13.3 0-24 10.7-24 24z"),h.appendChild(m),u.appendChild(h),u.addEventListener("click",(function(){e.callLib()})),o.appendChild(u),i.appendChild(o),n.appendChild(i)},this.writeCaptcha=function(t){n.textContent="";const e=document.createElement("span");e.textContent=t,n.appendChild(e)},this.callLib=function(){let n=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");if(n){n.open("POST",c+"public/index.php",!0),n.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),n.onreadystatechange=function(){if(4===n.readyState&&200===n.status){let c=n.responseText;c=c.trim(),null!==c&&""!==c&&("graphic"===t.type&&e.drawCaptcha(c),"text"===t.type&&e.writeCaptcha(c))}};let i={tps:t.type,csm:"extra"in t?JSON.stringify(t.extra):""},s=new URLSearchParams(i);n.send(s)}},this.callSound=function(){let t=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");if(t){t.open("POST",c+"public/index.php",!0),t.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),t.onreadystatechange=function(){if(4===t.readyState&&200===t.status){let n=t.responseText;n=n.trim();let c=null!==n&&""!==n&&n;!1!==c&&e.textToAudio(c)}};let n=new URLSearchParams({tps:"sound"});t.send(n)}},this.getLoader=function(){let t=document.createElementNS("http://www.w3.org/2000/svg","svg");t.setAttribute("viewBox","0 0 100 100"),t.setAttribute("x","0px"),t.setAttribute("y","0px"),t.setAttribute("enable-background","new 0 0 0 0"),t.setAttribute("xml:space","preserve"),t.setAttribute("style","width: 50px; height: 50px; display:inline-block;");const e=document.createElementNS("http://www.w3.org/2000/svg","path");e.setAttribute("fill","#CCC"),e.setAttribute("d","M73,50c0-12.7-10.3-23-23-23S27,37.3,27,50 M30.9,50c0-10.5,8.5-19.1,19.1-19.1S69.1,39.5,69.1,50");const n=document.createElementNS("http://www.w3.org/2000/svg","animateTransform");return n.setAttribute("attributeName","transform"),n.setAttribute("attributeType","xml"),n.setAttribute("type","rotate"),n.setAttribute("dur","1s"),n.setAttribute("from","0 50 50"),n.setAttribute("to","360 50 50"),n.setAttribute("repeatCount","indefinite"),e.appendChild(n),t.appendChild(e),t},this.drawCanvas=function(){n.setAttribute("style","text-align: center;"),n.textContent="";const t=document.createElement("style");t.setAttribute("type","text/css"),t.textContent=".clearfix::after {content: ''; display: block; clear: both;}",n.appendChild(t);const e=document.createElement("div");e.setAttribute("style","width: 165px; border: 0;"),e.className="clearfix";const c=document.createElement("div");c.setAttribute("style","float: left; text-align: center; padding: 3px;");const i=document.createElement("canvas");i.id="cnvCpt",i.setAttribute("width",130),i.setAttribute("height",37),c.appendChild(i),e.appendChild(c);const s=document.createElement("div");s.setAttribute("style","float: right;");const a=document.createElement("button");a.setAttribute("type","button"),a.setAttribute("style","margin-bottom: 2px;"),a.id="speechc";let o=document.createElementNS("http://www.w3.org/2000/svg","svg");o.setAttribute("viewBox","0 0 576 512"),o.setAttribute("width","12"),o.setAttribute("height","12"),o.setAttribute("style","padding-left: 2px;");const r=document.createElementNS("http://www.w3.org/2000/svg","path");r.setAttribute("d","M215 71.1L126.1 160H24c-13.3 0-24 10.7-24 24v144c0 13.3 10.7 24 24 24h102.1l89 89c15 15 41 4.5 41-17V88c0-21.5-26-32-41-17zm233.3-51.1c-11.2-7.3-26.2-4.2-33.5 7-7.3 11.2-4.2 26.2 7 33.5 66.3 43.5 105.8 116.6 105.8 195.6 0 79-39.6 152.1-105.8 195.6-11.2 7.3-14.3 22.3-7 33.5 7 10.7 21.9 14.6 33.5 7C528.3 439.6 576 351.3 576 256S528.3 72.4 448.4 20zM480 256c0-63.5-32.1-121.9-85.8-156.2-11.2-7.1-26-3.8-33.1 7.5s-3.8 26.2 7.4 33.4C408.3 166 432 209.1 432 256s-23.7 90-63.5 115.4c-11.2 7.1-14.5 22.1-7.4 33.4 6.5 10.4 21.1 15.1 33.1 7.5C447.9 377.9 480 319.5 480 256zm-141.8-76.9c-11.6-6.3-26.2-2.2-32.6 9.5-6.4 11.6-2.2 26.2 9.5 32.6C328 228.3 336 241.6 336 256c0 14.4-8 27.7-20.9 34.8-11.6 6.4-15.8 21-9.5 32.6 6.4 11.7 21.1 15.8 32.6 9.5 28.2-15.6 45.8-45 45.8-76.9s-17.5-61.3-45.8-76.9z"),o.appendChild(r),a.appendChild(o),s.appendChild(a);const d=document.createElement("br");s.appendChild(d);const l=document.createElement("button");l.setAttribute("type","button"),l.id="newgmc";let p=document.createElementNS("http://www.w3.org/2000/svg","svg");p.setAttribute("viewBox","0 0 576 512"),p.setAttribute("width","12"),p.setAttribute("height","12"),p.setAttribute("style","padding-left: 2px;");const u=document.createElementNS("http://www.w3.org/2000/svg","path");u.setAttribute("d","M142.9 142.9c62.2-62.2 162.7-62.5 225.3-1L327 183c-6.9 6.9-8.9 17.2-5.2 26.2s12.5 14.8 22.2 14.8H463.5c0 0 0 0 0 0H472c13.3 0 24-10.7 24-24V72c0-9.7-5.8-18.5-14.8-22.2s-19.3-1.7-26.2 5.2L413.4 96.6c-87.6-86.5-228.7-86.2-315.8 1C73.2 122 55.6 150.7 44.8 181.4c-5.9 16.7 2.9 34.9 19.5 40.8s34.9-2.9 40.8-19.5c7.7-21.8 20.2-42.3 37.8-59.8zM16 312v7.6 .7V440c0 9.7 5.8 18.5 14.8 22.2s19.3 1.7 26.2-5.2l41.6-41.6c87.6 86.5 228.7 86.2 315.8-1c24.4-24.4 42.1-53.1 52.9-83.7c5.9-16.7-2.9-34.9-19.5-40.8s-34.9 2.9-40.8 19.5c-7.7 21.8-20.2 42.3-37.8 59.8c-62.2 62.2-162.7 62.5-225.3 1L185 329c6.9-6.9 8.9-17.2 5.2-26.2s-12.5-14.8-22.2-14.8H48.4h-.7H40c-13.3 0-24 10.7-24 24z"),p.appendChild(u),l.appendChild(p),s.appendChild(l),e.appendChild(s),n.appendChild(e),this.canvCaptcha()},this.canvCaptcha=function(){const t=document.getElementById("cnvCpt");if(t.getContext){new FontFace("gmcf","url(public/font/cheapink.ttf)").load().then((e=>{document.fonts.add(e),console.log("Custom Font loaded!");const n=t.getContext("2d");n.font="20px gmcf",n.textAlign="center",n.letterSpacing="8px",n.shadowColor="rgb(190, 190, 190)",n.shadowOffsetX=3,n.shadowOffsetY=3;let c=t.width/7,i=t.height-12,o=function(t,e){var n="";e.indexOf("a")>-1&&(n+="abcdefghijklmnopqrstuvwxyz"),e.indexOf("A")>-1&&(n+="ABCDEFGHIJKLMNOPQRSTUVWXYZ"),e.indexOf("#")>-1&&(n+="0123456789"),e.indexOf("!")>-1&&(n+="~`!@#$%^&*()_+-={}[]:\";'<>?,./|\\");for(var c="",i=t;i>0;--i)c+=n[Math.round(Math.random()*(n.length-1))];return c}(6,"aA#");s=btoa(o);for(let t=0;t<=o.length;++t){let e=a[t%a.length];var r=o.charAt(t);n.fillStyle=e,n.fillText(o.charAt(t),c,i),c+=n.measureText(r).width}}),(t=>{console.error("gmCaptcha Error: "+t)})),document.getElementById("speechc").addEventListener("click",(function(t){t.preventDefault(),void 0!==s&&""!==s&&null!==s&&e.textToAudio(s)})),document.getElementById("newgmc").addEventListener("click",(function(t){const n=document.getElementById("cnvCpt");n.getContext("2d").clearRect(0,0,n.width,n.height),e.drawCanvas()}))}else console.log("Canvas unsupported!")},this.init=function(){let t=location.href;c=t.substring(0,t.lastIndexOf("/"))+"/";let e=!0;const s=new URL(c);"http:"!==s.protocol&&"https:"!==s.protocol&&(console.log("Full gmCaptcha initialization failed!"),e=!1),i=this.getLoader(),n.textContent="",n.appendChild(i),e?this.callLib():this.drawCanvas()},this.textToAudio=function(e){if(void 0===SpeechSynthesisUtterance){window.webkitSpeechSynthesisUtterance||window.mozSpeechSynthesisUtterance||window.msSpeechSynthesisUtterance||window.oSpeechSynthesisUtterance||window.SpeechSynthesisUtterance}if(void 0!==e){if(void 0===SpeechSynthesisUtterance)return console.log("Speech not supported by your Browser"),!1;{let n=atob(e),c=n.split("");n=c.join("  ");let i=new SpeechSynthesisUtterance;i.lang=t.spellLang,i.text=n,i.volume=1,i.rate=.7,i.pitch=.9,window.speechSynthesis.speak(i)}}},this.init()}
